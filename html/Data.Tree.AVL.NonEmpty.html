<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Tree.AVL.NonEmpty</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Non-empty AVL trees</a>
<a id="129" class="Comment">------------------------------------------------------------------------</a>

<a id="203" class="Comment">-- AVL trees are balanced binary search trees.</a>

<a id="251" class="Comment">-- The search tree invariant is specified using the technique</a>
<a id="313" class="Comment">-- described by Conor McBride in his talk &quot;Pivotal pragmatism&quot;.</a>

<a id="378" class="Symbol">{-#</a> <a id="382" class="Keyword">OPTIONS</a> <a id="390" class="Pragma">--without-K</a> <a id="402" class="Pragma">--safe</a> <a id="409" class="Symbol">#-}</a>

<a id="414" class="Keyword">open</a> <a id="419" class="Keyword">import</a> <a id="426" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="442" class="Keyword">using</a> <a id="448" class="Symbol">(</a><a id="449" href="Relation.Binary.Bundles.html#6928" class="Record">StrictTotalOrder</a><a id="465" class="Symbol">)</a>

<a id="468" class="Keyword">module</a> <a id="475" href="Data.Tree.AVL.NonEmpty.html" class="Module">Data.Tree.AVL.NonEmpty</a>
  <a id="500" class="Symbol">{</a><a id="501" href="Data.Tree.AVL.NonEmpty.html#501" class="Bound">a</a> <a id="503" href="Data.Tree.AVL.NonEmpty.html#503" class="Bound">ℓ₁</a> <a id="506" href="Data.Tree.AVL.NonEmpty.html#506" class="Bound">ℓ₂</a><a id="508" class="Symbol">}</a> <a id="510" class="Symbol">(</a><a id="511" href="Data.Tree.AVL.NonEmpty.html#511" class="Bound">strictTotalOrder</a> <a id="528" class="Symbol">:</a> <a id="530" href="Relation.Binary.Bundles.html#6928" class="Record">StrictTotalOrder</a> <a id="547" href="Data.Tree.AVL.NonEmpty.html#501" class="Bound">a</a> <a id="549" href="Data.Tree.AVL.NonEmpty.html#503" class="Bound">ℓ₁</a> <a id="552" href="Data.Tree.AVL.NonEmpty.html#506" class="Bound">ℓ₂</a><a id="554" class="Symbol">)</a> <a id="556" class="Keyword">where</a>

<a id="563" class="Keyword">open</a> <a id="568" class="Keyword">import</a> <a id="575" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="590" class="Keyword">using</a> <a id="596" class="Symbol">(</a><a id="597" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="601" class="Symbol">)</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="626" class="Keyword">open</a> <a id="631" class="Keyword">import</a> <a id="638" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="657" class="Symbol">as</a> <a id="660" class="Module">List⁺</a> <a id="666" class="Keyword">using</a> <a id="672" class="Symbol">(</a><a id="673" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a><a id="678" class="Symbol">;</a> <a id="680" href="Data.List.NonEmpty.Base.html#1125" class="InductiveConstructor Operator">_∷_</a><a id="683" class="Symbol">;</a> <a id="685" href="Data.List.NonEmpty.Base.html#3052" class="Function Operator">_++⁺_</a><a id="690" class="Symbol">)</a>
<a id="692" class="Keyword">open</a> <a id="697" class="Keyword">import</a> <a id="704" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="720" class="Keyword">hiding</a> <a id="727" class="Symbol">(</a><a id="728" href="Data.Maybe.Base.html#2020" class="Function">map</a><a id="731" class="Symbol">)</a>
<a id="733" class="Keyword">open</a> <a id="738" class="Keyword">import</a> <a id="745" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="759" class="Keyword">hiding</a> <a id="766" class="Symbol">(</a><a id="767" href="Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a><a id="770" class="Symbol">;</a> <a id="772" href="Data.Nat.Base.html#3063" class="Function Operator">_⊔_</a><a id="775" class="Symbol">;</a> <a id="777" href="Data.Nat.Base.html#5186" class="Function">compare</a><a id="784" class="Symbol">)</a>
<a id="786" class="Keyword">open</a> <a id="791" class="Keyword">import</a> <a id="798" href="Data.Product.html" class="Module">Data.Product</a> <a id="811" class="Keyword">hiding</a> <a id="818" class="Symbol">(</a><a id="819" href="Data.Product.html#2486" class="Function">map</a><a id="822" class="Symbol">)</a>
<a id="824" class="Keyword">open</a> <a id="829" class="Keyword">import</a> <a id="836" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="846" class="Keyword">open</a> <a id="851" class="Keyword">import</a> <a id="858" href="Function.html" class="Module">Function</a>
<a id="867" class="Keyword">open</a> <a id="872" class="Keyword">import</a> <a id="879" href="Level.html" class="Module">Level</a> <a id="885" class="Keyword">using</a> <a id="891" class="Symbol">(</a><a id="892" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a><a id="895" class="Symbol">;</a> <a id="897" href="Level.html#400" class="Record">Lift</a><a id="901" class="Symbol">;</a> <a id="903" href="Level.html#457" class="InductiveConstructor">lift</a><a id="907" class="Symbol">)</a>
<a id="909" class="Keyword">open</a> <a id="914" class="Keyword">import</a> <a id="921" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="937" class="Keyword">open</a> <a id="942" href="Relation.Binary.Bundles.html#6928" class="Module">StrictTotalOrder</a> <a id="959" href="Data.Tree.AVL.NonEmpty.html#511" class="Bound">strictTotalOrder</a> <a id="976" class="Keyword">renaming</a> <a id="985" class="Symbol">(</a><a id="986" href="Relation.Binary.Bundles.html#7015" class="Field">Carrier</a> <a id="994" class="Symbol">to</a> <a id="997" class="Field">Key</a><a id="1000" class="Symbol">)</a>
<a id="1002" class="Keyword">open</a> <a id="1007" class="Keyword">import</a> <a id="1014" href="Data.Tree.AVL.Value.html" class="Module">Data.Tree.AVL.Value</a> <a id="1034" href="Relation.Binary.Bundles.html#4469" class="Function">Eq.setoid</a>
<a id="1044" class="Keyword">import</a> <a id="1051" href="Data.Tree.AVL.Indexed.html" class="Module">Data.Tree.AVL.Indexed</a> <a id="1073" href="Data.Tree.AVL.NonEmpty.html#511" class="Bound">strictTotalOrder</a> as <a id="Indexed"></a><a id="1093" href="Data.Tree.AVL.NonEmpty.html#1093" class="Module">Indexed</a>
<a id="1101" class="Keyword">open</a> <a id="1106" href="Data.Tree.AVL.NonEmpty.html#1093" class="Module">Indexed</a> <a id="1114" class="Keyword">using</a> <a id="1120" class="Symbol">(</a><a id="1121" href="Data.Tree.AVL.Key.html#1209" class="InductiveConstructor">⊥⁺</a><a id="1123" class="Symbol">;</a> <a id="1125" href="Data.Tree.AVL.Key.html#1222" class="InductiveConstructor">⊤⁺</a><a id="1127" class="Symbol">;</a> <a id="1129" href="Data.Tree.AVL.Key.html#1685" class="InductiveConstructor">⊥⁺&lt;⊤⁺</a><a id="1134" class="Symbol">;</a> <a id="1136" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[_]&lt;⊤⁺</a><a id="1145" class="Symbol">;</a> <a id="1147" href="Data.Tree.AVL.Key.html#1726" class="InductiveConstructor Operator">⊥⁺&lt;[_]</a><a id="1153" class="Symbol">;</a> <a id="1155" href="Data.Tree.AVL.Key.html#1705" class="InductiveConstructor Operator">[_]&lt;⊤⁺</a><a id="1161" class="Symbol">;</a> <a id="1163" href="Data.Tree.AVL.Indexed.html#1688" class="InductiveConstructor">node</a><a id="1167" class="Symbol">;</a> <a id="1169" href="Data.Tree.AVL.Indexed.html#10864" class="Function">toList</a><a id="1175" class="Symbol">)</a>

<a id="1178" class="Comment">------------------------------------------------------------------------</a>
<a id="1251" class="Comment">-- Types and functions with hidden indices</a>

<a id="1295" class="Comment">-- NB: the height is non-zero thus guaranteeing that the AVL tree contains</a>
<a id="1370" class="Comment">-- at least one value.</a>

<a id="1394" class="Keyword">data</a> <a id="Tree⁺"></a><a id="1399" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1405" class="Symbol">{</a><a id="1406" href="Data.Tree.AVL.NonEmpty.html#1406" class="Bound">v</a><a id="1407" class="Symbol">}</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Data.Tree.AVL.NonEmpty.html#1410" class="Bound">V</a> <a id="1412" class="Symbol">:</a> <a id="1414" href="Data.Tree.AVL.Value.html#638" class="Record">Value</a> <a id="1420" href="Data.Tree.AVL.NonEmpty.html#1406" class="Bound">v</a><a id="1421" class="Symbol">)</a> <a id="1423" class="Symbol">:</a> <a id="1425" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1429" class="Symbol">(</a><a id="1430" href="Data.Tree.AVL.NonEmpty.html#501" class="Bound">a</a> <a id="1432" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1434" href="Data.Tree.AVL.NonEmpty.html#1406" class="Bound">v</a> <a id="1436" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1438" href="Data.Tree.AVL.NonEmpty.html#506" class="Bound">ℓ₂</a><a id="1440" class="Symbol">)</a> <a id="1442" class="Keyword">where</a>
  <a id="Tree⁺.tree"></a><a id="1450" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1455" class="Symbol">:</a> <a id="1457" class="Symbol">∀</a> <a id="1459" class="Symbol">{</a><a id="1460" href="Data.Tree.AVL.NonEmpty.html#1460" class="Bound">h</a><a id="1461" class="Symbol">}</a> <a id="1463" class="Symbol">→</a> <a id="1465" href="Data.Tree.AVL.Indexed.html#1582" class="Datatype">Indexed.Tree</a> <a id="1478" href="Data.Tree.AVL.NonEmpty.html#1410" class="Bound">V</a> <a id="1480" href="Data.Tree.AVL.Key.html#1209" class="InductiveConstructor">⊥⁺</a> <a id="1483" href="Data.Tree.AVL.Key.html#1222" class="InductiveConstructor">⊤⁺</a> <a id="1486" class="Symbol">(</a><a id="1487" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1491" href="Data.Tree.AVL.NonEmpty.html#1460" class="Bound">h</a><a id="1492" class="Symbol">)</a> <a id="1494" class="Symbol">→</a> <a id="1496" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1502" href="Data.Tree.AVL.NonEmpty.html#1410" class="Bound">V</a>

<a id="1505" class="Keyword">module</a> <a id="1512" href="Data.Tree.AVL.NonEmpty.html#1512" class="Module">_</a> <a id="1514" class="Symbol">{</a><a id="1515" href="Data.Tree.AVL.NonEmpty.html#1515" class="Bound">v</a><a id="1516" class="Symbol">}</a> <a id="1518" class="Symbol">{</a><a id="1519" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a> <a id="1521" class="Symbol">:</a> <a id="1523" href="Data.Tree.AVL.Value.html#638" class="Record">Value</a> <a id="1529" href="Data.Tree.AVL.NonEmpty.html#1515" class="Bound">v</a><a id="1530" class="Symbol">}</a> <a id="1532" class="Keyword">where</a>

  <a id="1541" class="Keyword">private</a>
    <a id="1553" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="1557" class="Symbol">=</a> <a id="1559" href="Data.Tree.AVL.Value.html#708" class="Field">Value.family</a> <a id="1572" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a>

  <a id="1577" href="Data.Tree.AVL.NonEmpty.html#1577" class="Function">singleton</a> <a id="1587" class="Symbol">:</a> <a id="1589" class="Symbol">(</a><a id="1590" href="Data.Tree.AVL.NonEmpty.html#1590" class="Bound">k</a> <a id="1592" class="Symbol">:</a> <a id="1594" href="Data.Tree.AVL.NonEmpty.html#997" class="Field">Key</a><a id="1597" class="Symbol">)</a> <a id="1599" class="Symbol">→</a> <a id="1601" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="1605" href="Data.Tree.AVL.NonEmpty.html#1590" class="Bound">k</a> <a id="1607" class="Symbol">→</a> <a id="1609" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1615" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a>
  <a id="1619" href="Data.Tree.AVL.NonEmpty.html#1577" class="Function">singleton</a> <a id="1629" href="Data.Tree.AVL.NonEmpty.html#1629" class="Bound">k</a> <a id="1631" href="Data.Tree.AVL.NonEmpty.html#1631" class="Bound">v</a> <a id="1633" class="Symbol">=</a> <a id="1635" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1640" class="Symbol">(</a><a id="1641" href="Data.Tree.AVL.Indexed.html#8174" class="Function">Indexed.singleton</a> <a id="1659" href="Data.Tree.AVL.NonEmpty.html#1629" class="Bound">k</a> <a id="1661" href="Data.Tree.AVL.NonEmpty.html#1631" class="Bound">v</a> <a id="1663" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[</a> <a id="1668" href="Data.Tree.AVL.NonEmpty.html#1629" class="Bound">k</a> <a id="1670" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">]&lt;⊤⁺</a><a id="1674" class="Symbol">)</a>

  <a id="1679" href="Data.Tree.AVL.NonEmpty.html#1679" class="Function">insert</a> <a id="1686" class="Symbol">:</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Data.Tree.AVL.NonEmpty.html#1689" class="Bound">k</a> <a id="1691" class="Symbol">:</a> <a id="1693" href="Data.Tree.AVL.NonEmpty.html#997" class="Field">Key</a><a id="1696" class="Symbol">)</a> <a id="1698" class="Symbol">→</a> <a id="1700" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="1704" href="Data.Tree.AVL.NonEmpty.html#1689" class="Bound">k</a> <a id="1706" class="Symbol">→</a> <a id="1708" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1714" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a> <a id="1716" class="Symbol">→</a> <a id="1718" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1724" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a>
  <a id="1728" href="Data.Tree.AVL.NonEmpty.html#1679" class="Function">insert</a> <a id="1735" href="Data.Tree.AVL.NonEmpty.html#1735" class="Bound">k</a> <a id="1737" href="Data.Tree.AVL.NonEmpty.html#1737" class="Bound">v</a> <a id="1739" class="Symbol">(</a><a id="1740" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1745" href="Data.Tree.AVL.NonEmpty.html#1745" class="Bound">t</a><a id="1746" class="Symbol">)</a> <a id="1748" class="Keyword">with</a> <a id="1753" href="Data.Tree.AVL.Indexed.html#9292" class="Function">Indexed.insert</a> <a id="1768" href="Data.Tree.AVL.NonEmpty.html#1735" class="Bound">k</a> <a id="1770" href="Data.Tree.AVL.NonEmpty.html#1737" class="Bound">v</a> <a id="1772" href="Data.Tree.AVL.NonEmpty.html#1745" class="Bound">t</a> <a id="1774" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[</a> <a id="1779" href="Data.Tree.AVL.NonEmpty.html#1735" class="Bound">k</a> <a id="1781" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">]&lt;⊤⁺</a>
  <a id="1788" class="Symbol">...</a> <a id="1792" class="Symbol">|</a> <a id="1794" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">Indexed.0#</a> <a id="1805" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1807" href="Data.Tree.AVL.NonEmpty.html#1807" class="Bound">t′</a> <a id="1810" class="Symbol">=</a> <a id="1812" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1817" href="Data.Tree.AVL.NonEmpty.html#1807" class="Bound">t′</a>
  <a id="1822" class="Symbol">...</a> <a id="1826" class="Symbol">|</a> <a id="1828" href="Data.Tree.AVL.Height.html#453" class="InductiveConstructor">Indexed.1#</a> <a id="1839" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1841" href="Data.Tree.AVL.NonEmpty.html#1841" class="Bound">t′</a> <a id="1844" class="Symbol">=</a> <a id="1846" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1851" href="Data.Tree.AVL.NonEmpty.html#1841" class="Bound">t′</a>

  <a id="1857" href="Data.Tree.AVL.NonEmpty.html#1857" class="Function">insertWith</a> <a id="1868" class="Symbol">:</a> <a id="1870" class="Symbol">(</a><a id="1871" href="Data.Tree.AVL.NonEmpty.html#1871" class="Bound">k</a> <a id="1873" class="Symbol">:</a> <a id="1875" href="Data.Tree.AVL.NonEmpty.html#997" class="Field">Key</a><a id="1878" class="Symbol">)</a> <a id="1880" class="Symbol">→</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="1889" class="Symbol">(</a><a id="1890" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="1894" href="Data.Tree.AVL.NonEmpty.html#1871" class="Bound">k</a><a id="1895" class="Symbol">)</a> <a id="1897" class="Symbol">→</a> <a id="1899" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="1903" href="Data.Tree.AVL.NonEmpty.html#1871" class="Bound">k</a><a id="1904" class="Symbol">)</a> <a id="1906" class="Symbol">→</a> <a id="1908" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1914" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a> <a id="1916" class="Symbol">→</a> <a id="1918" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="1924" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a>
  <a id="1928" href="Data.Tree.AVL.NonEmpty.html#1857" class="Function">insertWith</a> <a id="1939" href="Data.Tree.AVL.NonEmpty.html#1939" class="Bound">k</a> <a id="1941" href="Data.Tree.AVL.NonEmpty.html#1941" class="Bound">f</a> <a id="1943" class="Symbol">(</a><a id="1944" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="1949" href="Data.Tree.AVL.NonEmpty.html#1949" class="Bound">t</a><a id="1950" class="Symbol">)</a> <a id="1952" class="Keyword">with</a> <a id="1957" href="Data.Tree.AVL.Indexed.html#8540" class="Function">Indexed.insertWith</a> <a id="1976" href="Data.Tree.AVL.NonEmpty.html#1939" class="Bound">k</a> <a id="1978" href="Data.Tree.AVL.NonEmpty.html#1941" class="Bound">f</a> <a id="1980" href="Data.Tree.AVL.NonEmpty.html#1949" class="Bound">t</a> <a id="1982" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[</a> <a id="1987" href="Data.Tree.AVL.NonEmpty.html#1939" class="Bound">k</a> <a id="1989" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">]&lt;⊤⁺</a>
  <a id="1996" class="Symbol">...</a> <a id="2000" class="Symbol">|</a> <a id="2002" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">Indexed.0#</a> <a id="2013" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2015" href="Data.Tree.AVL.NonEmpty.html#2015" class="Bound">t′</a> <a id="2018" class="Symbol">=</a> <a id="2020" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2025" href="Data.Tree.AVL.NonEmpty.html#2015" class="Bound">t′</a>
  <a id="2030" class="Symbol">...</a> <a id="2034" class="Symbol">|</a> <a id="2036" href="Data.Tree.AVL.Height.html#453" class="InductiveConstructor">Indexed.1#</a> <a id="2047" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2049" href="Data.Tree.AVL.NonEmpty.html#2049" class="Bound">t′</a> <a id="2052" class="Symbol">=</a> <a id="2054" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2059" href="Data.Tree.AVL.NonEmpty.html#2049" class="Bound">t′</a>

  <a id="2065" href="Data.Tree.AVL.NonEmpty.html#2065" class="Function">delete</a> <a id="2072" class="Symbol">:</a> <a id="2074" href="Data.Tree.AVL.NonEmpty.html#997" class="Field">Key</a> <a id="2078" class="Symbol">→</a> <a id="2080" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2086" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a> <a id="2088" class="Symbol">→</a> <a id="2090" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2096" class="Symbol">(</a><a id="2097" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2103" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a><a id="2104" class="Symbol">)</a>
  <a id="2108" href="Data.Tree.AVL.NonEmpty.html#2065" class="Function">delete</a> <a id="2115" href="Data.Tree.AVL.NonEmpty.html#2115" class="Bound">k</a> <a id="2117" class="Symbol">(</a><a id="2118" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2123" class="Symbol">{</a><a id="2124" href="Data.Tree.AVL.NonEmpty.html#2124" class="Bound">h</a><a id="2125" class="Symbol">}</a>     <a id="2131" href="Data.Tree.AVL.NonEmpty.html#2131" class="Bound">t</a><a id="2132" class="Symbol">)</a> <a id="2134" class="Keyword">with</a> <a id="2139" href="Data.Tree.AVL.Indexed.html#9592" class="Function">Indexed.delete</a> <a id="2154" href="Data.Tree.AVL.NonEmpty.html#2115" class="Bound">k</a> <a id="2156" href="Data.Tree.AVL.NonEmpty.html#2131" class="Bound">t</a> <a id="2158" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[</a> <a id="2163" href="Data.Tree.AVL.NonEmpty.html#2115" class="Bound">k</a> <a id="2165" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">]&lt;⊤⁺</a>
  <a id="2172" href="Data.Tree.AVL.NonEmpty.html#2065" class="Function">delete</a> <a id="2179" href="Data.Tree.AVL.NonEmpty.html#2179" class="Bound">k</a> <a id="2181" class="Symbol">(</a><a id="2182" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2187" class="Symbol">{</a><a id="2188" href="Data.Tree.AVL.NonEmpty.html#2188" class="Bound">h</a><a id="2189" class="Symbol">}</a>     <a id="2195" href="Data.Tree.AVL.NonEmpty.html#2195" class="Bound">t</a><a id="2196" class="Symbol">)</a> <a id="2198" class="Symbol">|</a> <a id="2200" href="Data.Tree.AVL.Height.html#453" class="InductiveConstructor">Indexed.1#</a> <a id="2211" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2213" href="Data.Tree.AVL.NonEmpty.html#2213" class="Bound">t′</a> <a id="2216" class="Symbol">=</a> <a id="2218" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2223" class="Symbol">(</a><a id="2224" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2229" href="Data.Tree.AVL.NonEmpty.html#2213" class="Bound">t′</a><a id="2231" class="Symbol">)</a>
  <a id="2235" href="Data.Tree.AVL.NonEmpty.html#2065" class="Function">delete</a> <a id="2242" href="Data.Tree.AVL.NonEmpty.html#2242" class="Bound">k</a> <a id="2244" class="Symbol">(</a><a id="2245" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2250" class="Symbol">{</a><a id="2251" class="Number">0</a><a id="2252" class="Symbol">}</a>     <a id="2258" href="Data.Tree.AVL.NonEmpty.html#2258" class="Bound">t</a><a id="2259" class="Symbol">)</a> <a id="2261" class="Symbol">|</a> <a id="2263" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">Indexed.0#</a> <a id="2274" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2276" href="Data.Tree.AVL.NonEmpty.html#2276" class="Bound">t′</a> <a id="2279" class="Symbol">=</a> <a id="2281" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
  <a id="2291" href="Data.Tree.AVL.NonEmpty.html#2065" class="Function">delete</a> <a id="2298" href="Data.Tree.AVL.NonEmpty.html#2298" class="Bound">k</a> <a id="2300" class="Symbol">(</a><a id="2301" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2306" class="Symbol">{</a><a id="2307" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2311" href="Data.Tree.AVL.NonEmpty.html#2311" class="Bound">h</a><a id="2312" class="Symbol">}</a> <a id="2314" href="Data.Tree.AVL.NonEmpty.html#2314" class="Bound">t</a><a id="2315" class="Symbol">)</a> <a id="2317" class="Symbol">|</a> <a id="2319" href="Data.Tree.AVL.Height.html#435" class="InductiveConstructor">Indexed.0#</a> <a id="2330" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2332" href="Data.Tree.AVL.NonEmpty.html#2332" class="Bound">t′</a> <a id="2335" class="Symbol">=</a> <a id="2337" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="2342" class="Symbol">(</a><a id="2343" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2348" href="Data.Tree.AVL.NonEmpty.html#2332" class="Bound">t′</a><a id="2350" class="Symbol">)</a>

  <a id="2355" href="Data.Tree.AVL.NonEmpty.html#2355" class="Function">lookup</a> <a id="2362" class="Symbol">:</a> <a id="2364" class="Symbol">(</a><a id="2365" href="Data.Tree.AVL.NonEmpty.html#2365" class="Bound">k</a> <a id="2367" class="Symbol">:</a> <a id="2369" href="Data.Tree.AVL.NonEmpty.html#997" class="Field">Key</a><a id="2372" class="Symbol">)</a> <a id="2374" class="Symbol">→</a> <a id="2376" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2382" href="Data.Tree.AVL.NonEmpty.html#1519" class="Bound">V</a> <a id="2384" class="Symbol">→</a> <a id="2386" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2392" class="Symbol">(</a><a id="2393" href="Data.Tree.AVL.NonEmpty.html#1553" class="Function">Val</a> <a id="2397" href="Data.Tree.AVL.NonEmpty.html#2365" class="Bound">k</a><a id="2398" class="Symbol">)</a>
  <a id="2402" href="Data.Tree.AVL.NonEmpty.html#2355" class="Function">lookup</a> <a id="2409" href="Data.Tree.AVL.NonEmpty.html#2409" class="Bound">k</a> <a id="2411" class="Symbol">(</a><a id="2412" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2417" href="Data.Tree.AVL.NonEmpty.html#2417" class="Bound">t</a><a id="2418" class="Symbol">)</a> <a id="2420" class="Symbol">=</a> <a id="2422" href="Data.Tree.AVL.Indexed.html#10100" class="Function">Indexed.lookup</a> <a id="2437" href="Data.Tree.AVL.NonEmpty.html#2409" class="Bound">k</a> <a id="2439" href="Data.Tree.AVL.NonEmpty.html#2417" class="Bound">t</a> <a id="2441" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">⊥⁺&lt;[</a> <a id="2446" href="Data.Tree.AVL.NonEmpty.html#2409" class="Bound">k</a> <a id="2448" href="Data.Tree.AVL.Key.html#1882" class="Function Operator">]&lt;⊤⁺</a>

<a id="2454" class="Keyword">module</a> <a id="2461" href="Data.Tree.AVL.NonEmpty.html#2461" class="Module">_</a> <a id="2463" class="Symbol">{</a><a id="2464" href="Data.Tree.AVL.NonEmpty.html#2464" class="Bound">v</a> <a id="2466" href="Data.Tree.AVL.NonEmpty.html#2466" class="Bound">w</a><a id="2467" class="Symbol">}</a> <a id="2469" class="Symbol">{</a><a id="2470" href="Data.Tree.AVL.NonEmpty.html#2470" class="Bound">V</a> <a id="2472" class="Symbol">:</a> <a id="2474" href="Data.Tree.AVL.Value.html#638" class="Record">Value</a> <a id="2480" href="Data.Tree.AVL.NonEmpty.html#2464" class="Bound">v</a><a id="2481" class="Symbol">}</a> <a id="2483" class="Symbol">{</a><a id="2484" href="Data.Tree.AVL.NonEmpty.html#2484" class="Bound">W</a> <a id="2486" class="Symbol">:</a> <a id="2488" href="Data.Tree.AVL.Value.html#638" class="Record">Value</a> <a id="2494" href="Data.Tree.AVL.NonEmpty.html#2466" class="Bound">w</a><a id="2495" class="Symbol">}</a> <a id="2497" class="Keyword">where</a>

  <a id="2506" class="Keyword">private</a>
    <a id="2518" href="Data.Tree.AVL.NonEmpty.html#2518" class="Function">Val</a> <a id="2522" class="Symbol">=</a> <a id="2524" href="Data.Tree.AVL.Value.html#708" class="Field">Value.family</a> <a id="2537" href="Data.Tree.AVL.NonEmpty.html#2470" class="Bound">V</a>
    <a id="2543" href="Data.Tree.AVL.NonEmpty.html#2543" class="Function">Wal</a> <a id="2547" class="Symbol">=</a> <a id="2549" href="Data.Tree.AVL.Value.html#708" class="Field">Value.family</a> <a id="2562" href="Data.Tree.AVL.NonEmpty.html#2484" class="Bound">W</a>

  <a id="2567" href="Data.Tree.AVL.NonEmpty.html#2567" class="Function">map</a> <a id="2571" class="Symbol">:</a> <a id="2573" href="Relation.Unary.html#3359" class="Function">∀[</a> <a id="2576" href="Data.Tree.AVL.NonEmpty.html#2518" class="Function">Val</a> <a id="2580" href="Relation.Unary.html#4338" class="Function Operator">⇒</a> <a id="2582" href="Data.Tree.AVL.NonEmpty.html#2543" class="Function">Wal</a> <a id="2586" href="Relation.Unary.html#3359" class="Function">]</a> <a id="2588" class="Symbol">→</a> <a id="2590" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2596" href="Data.Tree.AVL.NonEmpty.html#2470" class="Bound">V</a> <a id="2598" class="Symbol">→</a> <a id="2600" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2606" href="Data.Tree.AVL.NonEmpty.html#2484" class="Bound">W</a>
  <a id="2610" href="Data.Tree.AVL.NonEmpty.html#2567" class="Function">map</a> <a id="2614" href="Data.Tree.AVL.NonEmpty.html#2614" class="Bound">f</a> <a id="2616" class="Symbol">(</a><a id="2617" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2622" href="Data.Tree.AVL.NonEmpty.html#2622" class="Bound">t</a><a id="2623" class="Symbol">)</a> <a id="2625" class="Symbol">=</a> <a id="2627" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2632" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="2634" href="Data.Tree.AVL.Indexed.html#11181" class="Function">Indexed.map</a> <a id="2646" href="Data.Tree.AVL.NonEmpty.html#2614" class="Bound">f</a> <a id="2648" href="Data.Tree.AVL.NonEmpty.html#2622" class="Bound">t</a>

<a id="2651" class="Keyword">module</a> <a id="2658" href="Data.Tree.AVL.NonEmpty.html#2658" class="Module">_</a> <a id="2660" class="Symbol">{</a><a id="2661" href="Data.Tree.AVL.NonEmpty.html#2661" class="Bound">v</a><a id="2662" class="Symbol">}</a> <a id="2664" class="Symbol">{</a><a id="2665" href="Data.Tree.AVL.NonEmpty.html#2665" class="Bound">V</a> <a id="2667" class="Symbol">:</a> <a id="2669" href="Data.Tree.AVL.Value.html#638" class="Record">Value</a> <a id="2675" href="Data.Tree.AVL.NonEmpty.html#2661" class="Bound">v</a><a id="2676" class="Symbol">}</a> <a id="2678" class="Keyword">where</a>

  <a id="2687" class="Comment">-- The input does not need to be ordered.</a>

  <a id="2732" href="Data.Tree.AVL.NonEmpty.html#2732" class="Function">fromList⁺</a> <a id="2742" class="Symbol">:</a> <a id="2744" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="2750" class="Symbol">(</a><a id="2751" href="Data.Tree.AVL.Value.html#880" class="Record Operator">K&amp;</a> <a id="2754" href="Data.Tree.AVL.NonEmpty.html#2665" class="Bound">V</a><a id="2755" class="Symbol">)</a> <a id="2757" class="Symbol">→</a> <a id="2759" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2765" href="Data.Tree.AVL.NonEmpty.html#2665" class="Bound">V</a>
  <a id="2769" href="Data.Tree.AVL.NonEmpty.html#2732" class="Function">fromList⁺</a> <a id="2779" class="Symbol">=</a> <a id="2781" href="Data.List.NonEmpty.Base.html#2309" class="Function">List⁺.foldr</a> <a id="2793" class="Symbol">(</a><a id="2794" href="Data.Product.html#3422" class="Function">uncurry</a> <a id="2802" href="Data.Tree.AVL.NonEmpty.html#1679" class="Function">insert</a> <a id="2809" href="Function.Base.html#3706" class="Function Operator">∘′</a> <a id="2812" href="Data.Tree.AVL.Value.html#1048" class="Function">toPair</a><a id="2818" class="Symbol">)</a> <a id="2820" class="Symbol">(</a><a id="2821" href="Data.Product.html#3422" class="Function">uncurry</a> <a id="2829" href="Data.Tree.AVL.NonEmpty.html#1577" class="Function">singleton</a> <a id="2839" href="Function.Base.html#3706" class="Function Operator">∘′</a> <a id="2842" href="Data.Tree.AVL.Value.html#1048" class="Function">toPair</a><a id="2848" class="Symbol">)</a>

  <a id="2853" class="Comment">-- The output is ordered</a>

  <a id="2881" href="Data.Tree.AVL.NonEmpty.html#2881" class="Function">toList⁺</a> <a id="2889" class="Symbol">:</a> <a id="2891" href="Data.Tree.AVL.NonEmpty.html#1399" class="Datatype">Tree⁺</a> <a id="2897" href="Data.Tree.AVL.NonEmpty.html#2665" class="Bound">V</a> <a id="2899" class="Symbol">→</a> <a id="2901" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="2907" class="Symbol">(</a><a id="2908" href="Data.Tree.AVL.Value.html#880" class="Record Operator">K&amp;</a> <a id="2911" href="Data.Tree.AVL.NonEmpty.html#2665" class="Bound">V</a><a id="2912" class="Symbol">)</a>
  <a id="2916" href="Data.Tree.AVL.NonEmpty.html#2881" class="Function">toList⁺</a> <a id="2924" class="Symbol">(</a><a id="2925" href="Data.Tree.AVL.NonEmpty.html#1450" class="InductiveConstructor">tree</a> <a id="2930" class="Symbol">(</a><a id="2931" href="Data.Tree.AVL.Indexed.html#1688" class="InductiveConstructor">node</a> <a id="2936" href="Data.Tree.AVL.NonEmpty.html#2936" class="Bound">k&amp;v</a> <a id="2940" href="Data.Tree.AVL.NonEmpty.html#2940" class="Bound">l</a> <a id="2942" href="Data.Tree.AVL.NonEmpty.html#2942" class="Bound">r</a> <a id="2944" href="Data.Tree.AVL.NonEmpty.html#2944" class="Bound">bal</a><a id="2947" class="Symbol">))</a> <a id="2950" class="Symbol">=</a> <a id="2952" href="Data.Tree.AVL.Indexed.html#10864" class="Function">toList</a> <a id="2959" href="Data.Tree.AVL.NonEmpty.html#2940" class="Bound">l</a> <a id="2961" href="Data.List.NonEmpty.Base.html#3052" class="Function Operator">++⁺</a> <a id="2965" href="Data.Tree.AVL.NonEmpty.html#2936" class="Bound">k&amp;v</a> <a id="2969" href="Data.List.NonEmpty.Base.html#1125" class="InductiveConstructor Operator">∷</a> <a id="2971" href="Data.Tree.AVL.Indexed.html#10864" class="Function">toList</a> <a id="2978" href="Data.Tree.AVL.NonEmpty.html#2942" class="Bound">r</a>
</pre></body></html>