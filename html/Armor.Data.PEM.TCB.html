<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Armor.Data.PEM.TCB</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Armor.Binary.html" class="Module">Armor.Binary</a>
<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Armor.Data.Base64.html" class="Module">Armor.Data.Base64</a>
<a id="56" class="Keyword">open</a> <a id="61" class="Keyword">import</a> <a id="68" href="Armor.Data.PEM.CertBoundary.TCB.html" class="Module">Armor.Data.PEM.CertBoundary.TCB</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="Armor.Data.PEM.CertText.TCB.html" class="Module">Armor.Data.PEM.CertText.TCB</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Armor.Data.PEM.CertText.FinalLine.TCB.html" class="Module">Armor.Data.PEM.CertText.FinalLine.TCB</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Armor.Data.PEM.CertText.FullLine.TCB.html" class="Module">Armor.Data.PEM.CertText.FullLine.TCB</a>
<a id="239" class="Keyword">import</a>      <a id="251" href="Armor.Grammar.Definitions.html" class="Module">Armor.Grammar.Definitions</a>
<a id="277" class="Keyword">import</a>      <a id="289" href="Armor.Grammar.IList.html" class="Module">Armor.Grammar.IList</a>
<a id="309" class="Keyword">import</a>      <a id="321" href="Armor.Grammar.Parallel.html" class="Module">Armor.Grammar.Parallel</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Armor.Prelude.html" class="Module">Armor.Prelude</a>

<a id="371" class="Keyword">module</a> <a id="378" href="Armor.Data.PEM.TCB.html" class="Module">Armor.Data.PEM.TCB</a> <a id="397" class="Keyword">where</a>

<a id="404" class="Keyword">open</a> <a id="409" href="Armor.Grammar.Definitions.html" class="Module">Armor.Grammar.Definitions</a> <a id="435" href="Armor.Prelude.html#329" class="Function">Char</a>
<a id="440" class="Keyword">open</a> <a id="445" href="Armor.Grammar.IList.html" class="Module">Armor.Grammar.IList</a>       <a id="471" href="Armor.Prelude.html#329" class="Function">Char</a>
<a id="476" class="Keyword">open</a> <a id="481" href="Armor.Grammar.Parallel.html" class="Module">Armor.Grammar.Parallel</a>    <a id="507" href="Armor.Prelude.html#329" class="Function">Char</a>

<a id="513" class="Keyword">record</a> <a id="Cert"></a><a id="520" href="Armor.Data.PEM.TCB.html#520" class="Record">Cert</a> <a id="525" class="Symbol">(@</a><a id="527" class="Symbol">0</a> <a id="529" href="Armor.Data.PEM.TCB.html#529" class="Bound">bs</a> <a id="532" class="Symbol">:</a> <a id="534" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="539" href="Armor.Prelude.html#329" class="Function">Char</a><a id="543" class="Symbol">)</a> <a id="545" class="Symbol">:</a> <a id="547" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="551" class="Keyword">where</a>
  <a id="559" class="Keyword">constructor</a> <a id="mkCert"></a><a id="571" href="Armor.Data.PEM.TCB.html#571" class="InductiveConstructor">mkCert</a>
  <a id="580" class="Keyword">field</a>
    <a id="590" class="Symbol">@</a><a id="591" class="Symbol">0</a> <a id="593" class="Symbol">{</a><a id="Cert.h"></a><a id="594" href="Armor.Data.PEM.TCB.html#594" class="Field">h</a> <a id="Cert.b"></a><a id="596" href="Armor.Data.PEM.TCB.html#596" class="Field">b</a> <a id="Cert.f"></a><a id="598" href="Armor.Data.PEM.TCB.html#598" class="Field">f</a><a id="599" class="Symbol">}</a> <a id="601" class="Symbol">:</a> <a id="603" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="608" href="Armor.Prelude.html#329" class="Function">Char</a>
    <a id="Cert.header"></a><a id="617" href="Armor.Data.PEM.TCB.html#617" class="Field">header</a> <a id="624" class="Symbol">:</a> <a id="626" href="Armor.Data.PEM.CertBoundary.TCB.html#416" class="Function">CertHeader</a> <a id="637" href="Armor.Data.PEM.TCB.html#594" class="Field">h</a>
    <a id="Cert.body"></a><a id="643" href="Armor.Data.PEM.TCB.html#643" class="Field">body</a>   <a id="650" class="Symbol">:</a> <a id="652" href="Armor.Data.PEM.CertText.TCB.html#273" class="Record">CertText</a>   <a id="663" href="Armor.Data.PEM.TCB.html#596" class="Field">b</a>
    <a id="Cert.footer"></a><a id="669" href="Armor.Data.PEM.TCB.html#669" class="Field">footer</a> <a id="676" class="Symbol">:</a> <a id="678" href="Armor.Data.PEM.CertBoundary.TCB.html#450" class="Function">CertFooter</a> <a id="689" href="Armor.Data.PEM.TCB.html#598" class="Field">f</a>
    <a id="695" class="Symbol">@</a><a id="696" class="Symbol">0</a> <a id="Cert.bs≡"></a><a id="698" href="Armor.Data.PEM.TCB.html#698" class="Field">bs≡</a> <a id="702" class="Symbol">:</a> <a id="704" href="Armor.Data.PEM.TCB.html#529" class="Bound">bs</a> <a id="707" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="709" href="Armor.Data.PEM.TCB.html#594" class="Field">h</a> <a id="711" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="714" href="Armor.Data.PEM.TCB.html#596" class="Field">b</a> <a id="716" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="719" href="Armor.Data.PEM.TCB.html#598" class="Field">f</a>

<a id="CertList"></a><a id="722" href="Armor.Data.PEM.TCB.html#722" class="Function">CertList</a> <a id="731" class="Symbol">=</a> <a id="733" href="Armor.Grammar.IList.TCB.html#361" class="Datatype">IList</a> <a id="739" href="Armor.Data.PEM.TCB.html#520" class="Record">Cert</a>

<a id="extractCert"></a><a id="745" href="Armor.Data.PEM.TCB.html#745" class="Function">extractCert</a> <a id="757" class="Symbol">:</a> <a id="759" class="Symbol">∀</a> <a id="761" class="Symbol">{@</a><a id="763" class="Symbol">0</a> <a id="765" href="Armor.Data.PEM.TCB.html#765" class="Bound">bs</a><a id="767" class="Symbol">}</a> <a id="769" class="Symbol">→</a> <a id="771" href="Armor.Data.PEM.TCB.html#520" class="Record">Cert</a> <a id="776" href="Armor.Data.PEM.TCB.html#765" class="Bound">bs</a> <a id="779" class="Symbol">→</a> <a id="781" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="786" href="Armor.Binary.UInt8.TCB.html#158" class="Function">UInt8</a>
<a id="792" href="Armor.Data.PEM.TCB.html#745" class="Function">extractCert</a> <a id="804" class="Symbol">(</a><a id="805" href="Armor.Data.PEM.TCB.html#571" class="InductiveConstructor">mkCert</a> <a id="812" class="Symbol">_</a> <a id="814" class="Symbol">(</a><a id="815" href="Armor.Data.PEM.CertText.TCB.html#328" class="InductiveConstructor">mkCertText</a> <a id="826" href="Armor.Data.PEM.TCB.html#826" class="Bound">body</a> <a id="831" href="Armor.Data.PEM.TCB.html#831" class="Bound">final</a> <a id="837" class="Symbol">_)</a> <a id="840" class="Symbol">_</a> <a id="842" class="Symbol">_)</a> <a id="845" class="Symbol">=</a>
  <a id="849" href="Armor.Data.PEM.TCB.html#879" class="Function">eb</a> <a id="852" href="Armor.Data.PEM.TCB.html#826" class="Bound">body</a> <a id="857" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="860" href="Armor.Data.PEM.TCB.html#1126" class="Function">ef</a> <a id="863" href="Armor.Data.PEM.TCB.html#831" class="Bound">final</a>
  <a id="871" class="Keyword">where</a>
  <a id="879" href="Armor.Data.PEM.TCB.html#879" class="Function">eb</a> <a id="882" class="Symbol">:</a> <a id="884" class="Symbol">∀</a> <a id="886" class="Symbol">{@</a><a id="888" class="Symbol">0</a> <a id="890" href="Armor.Data.PEM.TCB.html#890" class="Bound">bs</a><a id="892" class="Symbol">}</a> <a id="894" class="Symbol">→</a> <a id="896" href="Armor.Grammar.IList.TCB.html#361" class="Datatype">IList</a> <a id="902" href="Armor.Data.PEM.CertText.FullLine.TCB.html#373" class="Record">CertFullLine</a> <a id="915" href="Armor.Data.PEM.TCB.html#890" class="Bound">bs</a> <a id="918" class="Symbol">→</a> <a id="920" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="925" href="Armor.Binary.UInt8.TCB.html#158" class="Function">UInt8</a>
  <a id="933" href="Armor.Data.PEM.TCB.html#879" class="Function">eb</a> <a id="936" href="Armor.Grammar.IList.TCB.html#639" class="InductiveConstructor">nil</a> <a id="940" class="Symbol">=</a> <a id="942" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
  <a id="947" href="Armor.Data.PEM.TCB.html#879" class="Function">eb</a> <a id="950" class="Symbol">(</a><a id="951" href="Armor.Grammar.IList.TCB.html#658" class="InductiveConstructor">cons</a> <a id="956" class="Symbol">(</a><a id="957" href="Armor.Grammar.IList.TCB.html#502" class="InductiveConstructor">mkIListCons</a> <a id="969" class="Symbol">(</a><a id="970" href="Armor.Data.PEM.CertText.FullLine.TCB.html#432" class="InductiveConstructor">mkCertFullLine</a> <a id="985" class="Symbol">(</a><a id="986" href="Armor.Grammar.Parallel.TCB.html#334" class="InductiveConstructor">mk×ₚ</a> <a id="991" href="Armor.Data.PEM.TCB.html#991" class="Bound">line</a> <a id="996" class="Symbol">(</a><a id="997" href="Armor.Prelude.html#7820" class="InductiveConstructor Operator">─</a> <a id="999" href="Armor.Data.PEM.TCB.html#999" class="Bound">len≡</a><a id="1003" class="Symbol">))</a> <a id="1006" class="Symbol">_</a> <a id="1008" class="Symbol">_)</a> <a id="1011" href="Armor.Data.PEM.TCB.html#1011" class="Bound">tail₁</a> <a id="1017" class="Symbol">_))</a> <a id="1021" class="Symbol">=</a>
    <a id="1027" href="Armor.Data.Base64.TCB.html#1668" class="Function">decodeStr</a> <a id="1037" class="Symbol">(</a><a id="1038" href="Armor.Data.Base64.TCB.html#1258" class="InductiveConstructor">mk64Str</a> <a id="1046" href="Armor.Data.PEM.TCB.html#991" class="Bound">line</a> <a id="1051" class="Symbol">(</a><a id="1052" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="1058" class="Symbol">(λ</a> <a id="1061" href="Armor.Data.PEM.TCB.html#1061" class="Bound">x</a> <a id="1063" class="Symbol">→</a> <a id="1065" href="Armor.Data.PEM.TCB.html#1061" class="Bound">x</a> <a id="1067" href="Data.Nat.DivMod.html#1564" class="Function Operator">%</a> <a id="1069" class="Number">4</a> <a id="1071" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1073" class="Number">0</a><a id="1074" class="Symbol">)</a> <a id="1076" class="Symbol">(</a><a id="1077" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="1081" href="Armor.Data.PEM.TCB.html#999" class="Bound">len≡</a><a id="1085" class="Symbol">)</a> <a id="1087" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1091" class="Symbol">)</a> <a id="1093" class="Symbol">(</a><a id="1094" href="Armor.Data.Base64.TCB.html#955" class="InductiveConstructor">pad0</a> <a id="1099" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1103" class="Symbol">)</a> <a id="1105" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1109" class="Symbol">)</a> <a id="1111" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="1114" href="Armor.Data.PEM.TCB.html#879" class="Function">eb</a> <a id="1117" href="Armor.Data.PEM.TCB.html#1011" class="Bound">tail₁</a>

  <a id="1126" href="Armor.Data.PEM.TCB.html#1126" class="Function">ef</a> <a id="1129" class="Symbol">:</a> <a id="1131" class="Symbol">∀</a> <a id="1133" class="Symbol">{@</a><a id="1135" class="Symbol">0</a> <a id="1137" href="Armor.Data.PEM.TCB.html#1137" class="Bound">bs</a><a id="1139" class="Symbol">}</a> <a id="1141" class="Symbol">→</a> <a id="1143" href="Armor.Data.PEM.CertText.FinalLine.TCB.html#160" class="Record">CertFinalLine</a> <a id="1157" href="Armor.Data.PEM.TCB.html#1137" class="Bound">bs</a> <a id="1160" class="Symbol">→</a> <a id="1162" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1167" href="Armor.Binary.UInt8.TCB.html#158" class="Function">UInt8</a>
  <a id="1175" href="Armor.Data.PEM.TCB.html#1126" class="Function">ef</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Armor.Data.PEM.CertText.FinalLine.TCB.html#220" class="InductiveConstructor">mkCertFinalLine</a> <a id="1195" href="Armor.Data.PEM.TCB.html#1195" class="Bound">line</a> <a id="1200" href="Armor.Data.PEM.TCB.html#1200" class="Bound">lineLen</a> <a id="1208" class="Symbol">_</a> <a id="1210" class="Symbol">_)</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Armor.Data.Base64.TCB.html#1668" class="Function">decodeStr</a> <a id="1225" href="Armor.Data.PEM.TCB.html#1195" class="Bound">line</a>

<a id="extractCerts"></a><a id="1231" href="Armor.Data.PEM.TCB.html#1231" class="Function">extractCerts</a> <a id="1244" class="Symbol">:</a> <a id="1246" class="Symbol">∀</a> <a id="1248" class="Symbol">{@</a><a id="1250" class="Symbol">0</a> <a id="1252" href="Armor.Data.PEM.TCB.html#1252" class="Bound">bs</a><a id="1254" class="Symbol">}</a> <a id="1256" class="Symbol">→</a> <a id="1258" href="Armor.Data.PEM.TCB.html#722" class="Function">CertList</a> <a id="1267" href="Armor.Data.PEM.TCB.html#1252" class="Bound">bs</a> <a id="1270" class="Symbol">→</a> <a id="1272" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1277" href="Armor.Binary.UInt8.TCB.html#158" class="Function">UInt8</a>
<a id="1283" href="Armor.Data.PEM.TCB.html#1231" class="Function">extractCerts</a> <a id="1296" href="Armor.Grammar.IList.TCB.html#639" class="InductiveConstructor">nil</a> <a id="1300" class="Symbol">=</a> <a id="1302" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="1305" href="Armor.Data.PEM.TCB.html#1231" class="Function">extractCerts</a> <a id="1318" class="Symbol">(</a><a id="1319" href="Armor.Grammar.IList.TCB.html#714" class="InductiveConstructor">consIList</a> <a id="1329" href="Armor.Data.PEM.TCB.html#1329" class="Bound">c</a> <a id="1331" href="Armor.Data.PEM.TCB.html#1331" class="Bound">rest</a> <a id="1336" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1340" class="Symbol">)</a> <a id="1342" class="Symbol">=</a>
  <a id="1346" href="Armor.Data.PEM.TCB.html#745" class="Function">extractCert</a> <a id="1358" href="Armor.Data.PEM.TCB.html#1329" class="Bound">c</a> <a id="1360" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="1363" href="Armor.Data.PEM.TCB.html#1231" class="Function">extractCerts</a> <a id="1376" href="Armor.Data.PEM.TCB.html#1331" class="Bound">rest</a>


<a id="1383" class="Comment">----------------------------------------</a>
<a id="1424" class="Comment">-- charToNat : Char → ℕ</a>
<a id="1448" class="Comment">-- charToNat c = Char.toNat c - Char.toNat &#39;0&#39;</a>

<a id="1496" class="Comment">-- stringToNat : List Char → ℕ</a>
<a id="1527" class="Comment">-- stringToNat [] = 0</a>
<a id="1549" class="Comment">-- stringToNat (c ∷ cs) = charToNat c + 10 * stringToNat cs</a>

<a id="1610" class="Comment">-- record CertListWithRootStore (@0 bs : List Char) : Set where</a>
<a id="1674" class="Comment">--   constructor mkCertListWithRootStore</a>
<a id="1715" class="Comment">--   field</a>
<a id="1726" class="Comment">--     @0 {cl n rl} : List Char</a>
<a id="1758" class="Comment">--     certs : CertList cl</a>
<a id="1785" class="Comment">--     rootcerts : CertList rl</a>
<a id="1816" class="Comment">--     @0 bs≡ : bs ≡ cl ++ n ++ rl</a>
<a id="1851" class="Comment">--     @0 length≡ : stringToNat n ≡ lengthIList certs</a>
</pre></body></html>