<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Armor.IO</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--guardedness</a> <a id="27" class="Symbol">#-}</a>

<a id="32" class="Keyword">import</a>      <a id="44" href="Armor.Foreign.ByteString.html" class="Module">Armor.Foreign.ByteString</a> <a id="69" class="Symbol">as</a> <a id="72" class="Module">ByteString</a>
<a id="83" class="Keyword">open</a> <a id="88" class="Keyword">import</a> <a id="95" href="Armor.Foreign.Time.html" class="Module">Armor.Foreign.Time</a>
<a id="114" class="Keyword">open</a> <a id="119" class="Keyword">import</a> <a id="126" href="Armor.Prelude.html" class="Module">Armor.Prelude</a>
<a id="140" class="Keyword">import</a>      <a id="152" href="System.Exit.html" class="Module">System.Exit</a>

<a id="165" class="Keyword">module</a> <a id="172" href="Armor.IO.html" class="Module">Armor.IO</a> <a id="181" class="Keyword">where</a>

<a id="188" class="Symbol">{-#</a> <a id="192" class="Keyword">FOREIGN</a> <a id="200" class="Pragma">GHC</a> <a id="204" class="Pragma">import</a> <a id="211" class="Pragma">qualified</a> <a id="221" class="Pragma">Data.ByteString</a> <a id="237" class="Pragma">as</a> <a id="240" class="Pragma">ByteString</a> <a id="251" class="Symbol">#-}</a>
<a id="255" class="Symbol">{-#</a> <a id="259" class="Keyword">FOREIGN</a> <a id="267" class="Pragma">GHC</a> <a id="271" class="Pragma">import</a> <a id="278" class="Pragma">qualified</a> <a id="288" class="Pragma">System.Environment</a> <a id="307" class="Symbol">#-}</a>
<a id="311" class="Symbol">{-#</a> <a id="315" class="Keyword">FOREIGN</a> <a id="323" class="Pragma">GHC</a> <a id="327" class="Pragma">import</a> <a id="334" class="Pragma">qualified</a> <a id="344" class="Pragma">System.IO</a> <a id="354" class="Symbol">#-}</a>
<a id="358" class="Symbol">{-#</a> <a id="362" class="Keyword">FOREIGN</a> <a id="370" class="Pragma">GHC</a> <a id="374" class="Pragma">import</a> <a id="381" class="Pragma">qualified</a> <a id="391" class="Pragma">Data.Text</a>          <a id="410" class="Symbol">#-}</a>
<a id="414" class="Symbol">{-#</a> <a id="418" class="Keyword">FOREIGN</a> <a id="426" class="Pragma">GHC</a> <a id="430" class="Pragma">import</a> <a id="437" class="Pragma">qualified</a> <a id="447" class="Pragma">Data.Text.IO</a> <a id="460" class="Pragma">as</a> <a id="463" class="Pragma">TIO</a> <a id="467" class="Symbol">#-}</a>
<a id="471" class="Symbol">{-#</a> <a id="475" class="Keyword">FOREIGN</a> <a id="483" class="Pragma">GHC</a> <a id="487" class="Pragma">import</a>           <a id="504" class="Pragma">Data.Time.Clock</a> <a id="520" class="Symbol">#-}</a>

<a id="525" class="Keyword">module</a> <a id="Primitive"></a><a id="532" href="Armor.IO.html#532" class="Module">Primitive</a> <a id="542" class="Keyword">where</a>
  <a id="550" class="Keyword">open</a> <a id="555" class="Keyword">import</a> <a id="562" href="IO.Primitive.html" class="Module">IO.Primitive</a>
  <a id="577" class="Keyword">postulate</a>
    <a id="Primitive.Handle"></a><a id="591" href="Armor.IO.html#591" class="Postulate">Handle</a> <a id="Primitive.IOMode"></a><a id="598" href="Armor.IO.html#598" class="Postulate">IOMode</a>  <a id="606" class="Symbol">:</a> <a id="608" href="Agda.Primitive.html#326" class="Primitive">Set</a>

    <a id="Primitive.readMode"></a><a id="617" href="Armor.IO.html#617" class="Postulate">readMode</a> <a id="626" class="Symbol">:</a> <a id="628" href="Armor.IO.html#598" class="Postulate">IOMode</a>
    <a id="Primitive.openFile"></a><a id="639" href="Armor.IO.html#639" class="Postulate">openFile</a> <a id="648" class="Symbol">:</a> <a id="650" href="Armor.Prelude.html#2977" class="Function">String</a> <a id="657" class="Symbol">→</a> <a id="659" href="Armor.IO.html#598" class="Postulate">IOMode</a> <a id="666" class="Symbol">→</a> <a id="668" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="671" href="Armor.IO.html#591" class="Postulate">Handle</a>

    <a id="Primitive.getArgs"></a><a id="683" href="Armor.IO.html#683" class="Postulate">getArgs</a> <a id="691" class="Symbol">:</a> <a id="693" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="696" class="Symbol">(</a><a id="697" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="702" href="Armor.Prelude.html#2977" class="Function">String</a><a id="708" class="Symbol">)</a>
    <a id="Primitive.stderr"></a><a id="714" href="Armor.IO.html#714" class="Postulate">stderr</a>  <a id="722" class="Symbol">:</a> <a id="724" href="Armor.IO.html#591" class="Postulate">Handle</a>
    <a id="Primitive.hPutStrLn"></a><a id="735" href="Armor.IO.html#735" class="Postulate">hPutStrLn</a> <a id="745" class="Symbol">:</a> <a id="747" href="Armor.IO.html#591" class="Postulate">Handle</a> <a id="754" class="Symbol">→</a> <a id="756" href="Armor.Prelude.html#2977" class="Function">String</a> <a id="763" class="Symbol">→</a> <a id="765" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="768" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>

    <a id="Primitive.getContents"></a><a id="775" href="Armor.IO.html#775" class="Postulate">getContents</a>    <a id="790" class="Symbol">:</a> <a id="792" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="795" href="Armor.Foreign.ByteString.html#236" class="Postulate">ByteString.ByteString</a>
    <a id="Primitive.hGetContents"></a><a id="821" href="Armor.IO.html#821" class="Postulate">hGetContents</a>   <a id="836" class="Symbol">:</a> <a id="838" href="Armor.IO.html#591" class="Postulate">Handle</a> <a id="845" class="Symbol">→</a> <a id="847" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="850" href="Armor.Foreign.ByteString.html#236" class="Postulate">ByteString.ByteString</a>
    <a id="Primitive.getCurrentTime"></a><a id="876" href="Armor.IO.html#876" class="Postulate">getCurrentTime</a> <a id="891" class="Symbol">:</a> <a id="893" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="896" href="Armor.Foreign.Time.html#1073" class="Postulate">UTCTime</a>

<a id="905" class="Symbol">{-#</a> <a id="909" class="Keyword">COMPILE</a> <a id="917" class="Keyword">GHC</a> <a id="921" href="Armor.IO.html#591" class="Postulate">Primitive.Handle</a> <a id="938" class="Pragma">=</a> <a id="940" class="Pragma">type</a> <a id="945" class="Pragma">System.IO.Handle</a> <a id="962" class="Symbol">#-}</a>
<a id="966" class="Symbol">{-#</a> <a id="970" class="Keyword">COMPILE</a> <a id="978" class="Keyword">GHC</a> <a id="982" href="Armor.IO.html#598" class="Postulate">Primitive.IOMode</a> <a id="999" class="Pragma">=</a> <a id="1001" class="Pragma">type</a> <a id="1006" class="Pragma">System.IO.IOMode</a> <a id="1023" class="Symbol">#-}</a>

<a id="1028" class="Symbol">{-#</a> <a id="1032" class="Keyword">FOREIGN</a> <a id="1040" class="Pragma">GHC</a>
<a id="1044" class="Pragma">aeresOpenFile</a> <a id="1058" class="Pragma">::</a> <a id="1061" class="Pragma">Data.Text.Text</a> <a id="1076" class="Pragma">-&gt;</a> <a id="1079" class="Pragma">System.IO.IOMode</a> <a id="1096" class="Pragma">-&gt;</a> <a id="1099" class="Pragma">IO</a> <a id="1102" class="Pragma">System.IO.Handle</a>
<a id="1119" class="Pragma">aeresOpenFile</a> <a id="1133" class="Pragma">path</a> <a id="1138" class="Pragma">mode</a> <a id="1143" class="Pragma">=</a> <a id="1145" class="Pragma">System.IO.openFile</a> <a id="1164" class="Pragma">(Data.Text.unpack</a> <a id="1182" class="Pragma">path)</a> <a id="1188" class="Pragma">mode</a>
<a id="1193" class="Symbol">#-}</a>

<a id="1198" class="Symbol">{-#</a> <a id="1202" class="Keyword">COMPILE</a> <a id="1210" class="Keyword">GHC</a> <a id="1214" href="Armor.IO.html#617" class="Postulate">Primitive.readMode</a> <a id="1233" class="Pragma">=</a> <a id="1235" class="Pragma">System.IO.ReadMode</a> <a id="1254" class="Symbol">#-}</a>
<a id="1258" class="Symbol">{-#</a> <a id="1262" class="Keyword">COMPILE</a> <a id="1270" class="Keyword">GHC</a> <a id="1274" href="Armor.IO.html#639" class="Postulate">Primitive.openFile</a> <a id="1293" class="Pragma">=</a> <a id="1295" class="Pragma">aeresOpenFile</a> <a id="1309" class="Symbol">#-}</a>

<a id="1314" class="Symbol">{-#</a> <a id="1318" class="Keyword">COMPILE</a> <a id="1326" class="Keyword">GHC</a> <a id="1330" href="Armor.IO.html#683" class="Postulate">Primitive.getArgs</a> <a id="1348" class="Pragma">=</a> <a id="1350" class="Pragma">fmap</a> <a id="1355" class="Pragma">Data.Text.pack</a> <a id="1370" class="Pragma">&lt;$&gt;</a> <a id="1374" class="Pragma">System.Environment.getArgs</a> <a id="1401" class="Symbol">#-}</a>
<a id="1405" class="Symbol">{-#</a> <a id="1409" class="Keyword">COMPILE</a> <a id="1417" class="Keyword">GHC</a> <a id="1421" href="Armor.IO.html#714" class="Postulate">Primitive.stderr</a> <a id="1438" class="Pragma">=</a> <a id="1440" class="Pragma">System.IO.stderr</a> <a id="1457" class="Symbol">#-}</a>
<a id="1461" class="Symbol">{-#</a> <a id="1465" class="Keyword">COMPILE</a> <a id="1473" class="Keyword">GHC</a> <a id="1477" href="Armor.IO.html#735" class="Postulate">Primitive.hPutStrLn</a> <a id="1497" class="Pragma">=</a> <a id="1499" class="Pragma">TIO.hPutStrLn</a> <a id="1513" class="Symbol">#-}</a>

<a id="1518" class="Symbol">{-#</a> <a id="1522" class="Keyword">COMPILE</a> <a id="1530" class="Keyword">GHC</a> <a id="1534" href="Armor.IO.html#775" class="Postulate">Primitive.getContents</a> <a id="1556" class="Pragma">=</a> <a id="1558" class="Pragma">ByteString.getContents</a> <a id="1581" class="Symbol">#-}</a>
<a id="1585" class="Symbol">{-#</a> <a id="1589" class="Keyword">COMPILE</a> <a id="1597" class="Keyword">GHC</a> <a id="1601" href="Armor.IO.html#821" class="Postulate">Primitive.hGetContents</a> <a id="1624" class="Pragma">=</a> <a id="1626" class="Pragma">ByteString.hGetContents</a> <a id="1650" class="Symbol">#-}</a>
<a id="1654" class="Symbol">{-#</a> <a id="1658" class="Keyword">COMPILE</a> <a id="1666" class="Keyword">GHC</a> <a id="1670" href="Armor.IO.html#876" class="Postulate">Primitive.getCurrentTime</a> <a id="1695" class="Pragma">=</a> <a id="1697" class="Pragma">getCurrentTime</a> <a id="1712" class="Symbol">#-}</a>

<a id="1717" class="Keyword">open</a> <a id="1722" class="Keyword">import</a> <a id="1729" href="IO.html" class="Module">IO</a>
<a id="1732" class="Keyword">open</a> <a id="1737" href="System.Exit.html" class="Module">System.Exit</a> <a id="1749" class="Keyword">public</a> <a id="1756" class="Keyword">using</a> <a id="1762" class="Symbol">(</a><a id="1763" href="System.Exit.html#929" class="Function">exitFailure</a> <a id="1775" class="Symbol">;</a> <a id="1777" href="System.Exit.html#988" class="Function">exitSuccess</a><a id="1788" class="Symbol">)</a>

<a id="openFile"></a><a id="1791" href="Armor.IO.html#1791" class="Function">openFile</a> <a id="1800" class="Symbol">:</a> <a id="1802" href="Armor.Prelude.html#2977" class="Function">String</a> <a id="1809" class="Symbol">→</a> <a id="1811" href="Armor.IO.html#598" class="Postulate">Primitive.IOMode</a> <a id="1828" class="Symbol">→</a> <a id="1830" href="IO.Base.html#917" class="Datatype">IO</a> <a id="1833" href="Armor.IO.html#591" class="Postulate">Primitive.Handle</a>
<a id="1850" href="Armor.IO.html#1791" class="Function">openFile</a> <a id="1859" href="Armor.IO.html#1859" class="Bound">path</a> <a id="1864" href="Armor.IO.html#1864" class="Bound">mode</a> <a id="1869" class="Symbol">=</a> <a id="1871" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="1876" class="Symbol">(</a><a id="1877" href="Armor.IO.html#639" class="Postulate">Primitive.openFile</a> <a id="1896" href="Armor.IO.html#1859" class="Bound">path</a> <a id="1901" href="Armor.IO.html#1864" class="Bound">mode</a><a id="1905" class="Symbol">)</a>

<a id="getArgs"></a><a id="1908" href="Armor.IO.html#1908" class="Function">getArgs</a> <a id="1916" class="Symbol">:</a> <a id="1918" href="IO.Base.html#917" class="Datatype">IO</a> <a id="1921" class="Symbol">(</a><a id="1922" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1927" href="Armor.Prelude.html#2977" class="Function">String</a><a id="1933" class="Symbol">)</a>
<a id="1935" href="Armor.IO.html#1908" class="Function">getArgs</a> <a id="1943" class="Symbol">=</a> <a id="1945" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="1950" href="Armor.IO.html#683" class="Postulate">Primitive.getArgs</a>

<a id="putStrLnErr"></a><a id="1969" href="Armor.IO.html#1969" class="Function">putStrLnErr</a> <a id="1981" class="Symbol">:</a> <a id="1983" href="Armor.Prelude.html#2977" class="Function">String</a> <a id="1990" class="Symbol">→</a> <a id="1992" href="IO.Base.html#917" class="Datatype">IO</a> <a id="1995" class="Symbol">(</a><a id="1996" href="Level.html#400" class="Record">Level.Lift</a> <a id="2007" href="Agda.Primitive.html#764" class="Primitive">Level.zero</a> <a id="2018" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="2019" class="Symbol">)</a>
<a id="2021" href="Armor.IO.html#1969" class="Function">putStrLnErr</a> <a id="2033" href="Armor.IO.html#2033" class="Bound">str</a> <a id="2037" class="Symbol">=</a> <a id="2039" href="Level.html#457" class="InductiveConstructor">Level.lift</a> <a id="2050" href="IO.Base.html#1346" class="Function Operator">IO.&lt;$&gt;</a> <a id="2057" class="Symbol">(</a><a id="2058" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="2063" class="Symbol">(</a><a id="2064" href="Armor.IO.html#735" class="Postulate">Primitive.hPutStrLn</a> <a id="2084" href="Armor.IO.html#714" class="Postulate">Primitive.stderr</a> <a id="2101" href="Armor.IO.html#2033" class="Bound">str</a><a id="2104" class="Symbol">))</a>

<a id="getByteStringContents"></a><a id="2108" href="Armor.IO.html#2108" class="Function">getByteStringContents</a> <a id="2130" class="Symbol">:</a> <a id="2132" href="IO.Base.html#917" class="Datatype">IO</a> <a id="2135" href="Armor.Foreign.ByteString.html#236" class="Postulate">ByteString.ByteString</a>
<a id="2157" href="Armor.IO.html#2108" class="Function">getByteStringContents</a> <a id="2179" class="Symbol">=</a> <a id="2181" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="2186" href="Armor.IO.html#775" class="Postulate">Primitive.getContents</a>

<a id="hGetByteStringContents"></a><a id="2209" href="Armor.IO.html#2209" class="Function">hGetByteStringContents</a> <a id="2232" class="Symbol">:</a> <a id="2234" href="Armor.IO.html#591" class="Postulate">Primitive.Handle</a> <a id="2251" class="Symbol">→</a> <a id="2253" href="IO.Base.html#917" class="Datatype">IO</a> <a id="2256" href="Armor.Foreign.ByteString.html#236" class="Postulate">ByteString.ByteString</a>
<a id="2278" href="Armor.IO.html#2209" class="Function">hGetByteStringContents</a> <a id="2301" href="Armor.IO.html#2301" class="Bound">h</a> <a id="2303" class="Symbol">=</a> <a id="2305" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="2310" class="Symbol">(</a><a id="2311" href="Armor.IO.html#821" class="Postulate">Primitive.hGetContents</a> <a id="2334" href="Armor.IO.html#2301" class="Bound">h</a><a id="2335" class="Symbol">)</a>

<a id="getCurrentTime"></a><a id="2338" href="Armor.IO.html#2338" class="Function">getCurrentTime</a> <a id="2353" class="Symbol">:</a> <a id="2355" href="IO.Base.html#917" class="Datatype">IO</a> <a id="2358" href="Armor.Foreign.Time.html#1073" class="Postulate">UTCTime</a>
<a id="2366" href="Armor.IO.html#2338" class="Function">getCurrentTime</a> <a id="2381" class="Symbol">=</a> <a id="2383" href="IO.Base.html#954" class="InductiveConstructor">lift</a> <a id="2388" href="Armor.IO.html#876" class="Postulate">Primitive.getCurrentTime</a>
</pre></body></html>